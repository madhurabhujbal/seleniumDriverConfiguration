!function(n,e){"use strict";function t(n){return{name:n.name,message:n.message,stack:n.stack}}function o(n,e){return(n||[]).concat(e||[]).filter(function(n,e,t){return t.indexOf(n)===e})}function a(){var e=!n.opener,t=!!(n.top&&n!=n.top||n.parent&&n!=n.parent);return e&&t}function s(n){var e;try{e="object"==typeof n&&null!==n&&1===n.nodeType&&/^I?FRAME$/.test(n.nodeName||"")&&!!n.hasAttribute&&!!n.getAttribute&&!!n.setAttribute}catch(n){e=!1}return e}function r(e){var o;try{s(o=n.frameElement)||(o=null)}catch(n){o=null,"function"==typeof e&&e(t(n))}return o}function l(n){var e;try{e=document.domain||null}catch(o){e=null,"function"==typeof n&&n(t(o))}return e}function i(n){var e,t=null;return null===n?t={forms:null,modals:null,orientationLock:null,pointerLock:null,popups:null,popupsToEscapeSandbox:null,presentation:null,sameOrigin:!0,scripts:!0,topNavigation:null,topNavigationByUserActivation:null}:"string"==typeof n&&(t={forms:-1!==(e=n.replace(/^\s+|\s+$/g,"").toLowerCase().split(/\s+/)).indexOf("allow-forms"),modals:-1!==e.indexOf("allow-modals"),orientationLock:-1!==e.indexOf("allow-orientation-lock"),pointerLock:-1!==e.indexOf("allow-pointer-lock"),popups:-1!==e.indexOf("allow-popups"),popupsToEscapeSandbox:-1!==e.indexOf("allow-popups-to-escape-sandbox"),presentation:-1!==e.indexOf("allow-presentation"),sameOrigin:-1!==e.indexOf("allow-same-origin"),scripts:-1!==e.indexOf("allow-scripts"),topNavigation:-1!==e.indexOf("allow-top-navigation"),topNavigationByUserActivation:-1!==e.indexOf("allow-top-navigation-by-user-activation")}),t}function u(n,e){var t,a,s,r,l=!1;if(n&&"object"==typeof n&&e&&"object"==typeof e)for(l=!0,a=0,s=(t=o(Object.keys(n),Object.keys(e))).length;a<s;a++)if(r=t[a],!n.hasOwnProperty(r)||!e.hasOwnProperty(r)||n[r]!==e[r]){l=!1;break}return l}function d(n,t){var o,a,r,l,d={sandboxed:e,sandboxAllowances:e,unsandboxable:e,resandboxable:e,errors:[]};if(s(n)){try{d.sandboxed=n.hasAttribute("sandbox")}catch(n){d.sandboxed=null,"function"==typeof t&&t(n)}if(d.sandboxed)try{o=n.getAttribute("sandbox")||""}catch(n){o=null,"function"==typeof t&&t(n)}else null===d.sandboxed&&(o=null);if(null!==o&&"string"!=typeof o||(d.sandboxAllowances=i(o)),d.sandboxed)try{n.removeAttribute("sandbox"),d.unsandboxable=!n.hasAttribute("sandbox")}catch(n){d.unsandboxable=!1,"function"==typeof t&&t(n)}if(d.unsandboxable&&"string"==typeof o)try{n.setAttribute("sandbox",o),a=n.hasAttribute("sandbox")}catch(n){a=!1,"function"==typeof t&&t(n)}if(a&&d.sandboxAllowances)try{r=n.getAttribute("sandbox")||""}catch(n){r=null,"function"==typeof t&&t(n)}else null===a&&(r=null);null!==r&&"string"!=typeof r||(r=i(r)),a&&(l=null,d.sandboxAllowances&&r&&(l=u(d.sandboxAllowances,r))),d.resandboxable=l}return d}function c(){var n=this;return n instanceof c?(n._initialState=n.detect(),void(n._unsandboxState=null)):new c}var b=Array.prototype.slice;c.prototype.detect=function(){var n,o,s,i={framed:!1,crossOrigin:null,sandboxed:null,sandboxAllowances:e,unsandboxable:e,resandboxable:e,sandboxable:e,errors:[]},u=function(n){i.errors.push(t(n))};try{i.framed=a(),i.framed?(null!=(n=r(function(n){o=t(n),i.errors.push(o)}))?(i.crossOrigin=!1,s=d(n,u),i.sandboxed=s.sandboxed,i.sandboxAllowances=s.sandboxAllowances,i.unsandboxable=s.unsandboxable,i.resandboxable=s.resandboxable):(i.crossOrigin=!0,i.sandboxed=null,i.sandboxAllowances={forms:null,modals:null,orientationLock:null,pointerLock:null,popups:null,popupsToEscapeSandbox:null,presentation:null,sameOrigin:null,scripts:!0,topNavigation:null,topNavigationByUserActivation:null},i.unsandboxable=!1,i.resandboxable=!1,null===l(u)?(i.sandboxed=!0,i.sandboxAllowances.sameOrigin=!1):o&&("SecurityError"!==o.name?i.crossOrigin=null:/(^|[\s\(\[@])sandbox(es|ed|ing|[\s\.,!\)\]@]|$)/.test(o.message.toLowerCase())&&(i.sandboxed=!0,i.sandboxAllowances.sameOrigin=!0))),i.sandboxable=i.resandboxable||!0===i.framed&&!1===i.crossOrigin&&(!1===i.sandboxed||i.sandboxAllowances.sameOrigin)||!1):(i.crossOrigin=e,i.sandboxed=e,i.errors=e)}catch(n){u(n)}return i},c.prototype.unsandbox=function(){var n,e,t=!1,o=this,a=o._initialState;if(!1===a.framed)t=!0;else if(!1===a.crossOrigin&&(n=o.detect(),t=!1===n.sandboxed,n.sandboxed&&n.unsandboxable&&(o._unsandboxState=n,e=r(function(){t=!1}))))try{e.removeAttribute("sandbox"),t=!e.hasAttribute("sandbox")}catch(n){t=!1}return t},c.prototype.resandbox=function(){var n=!1,e=this;return null!=e._unsandboxState&&(n=e.sandbox(e._unsandboxState.sandboxAllowances)),!0===n&&(e._unsandboxState=null),n},c.prototype.sandbox=function(n){var e,t,a,s,i,u,d=!1,c=this._initialState,b=[];if(n&&"object"==typeof n&&c.framed&&!1!==c.crossOrigin&&((!1===(t=this.detect()).sandboxed&&t.sandboxable||t.sandboxed&&t.unsandboxable)&&(a=t.sandboxAllowances,o(Object.keys(n),Object.keys(a||{})).forEach(function(e){(!0===n[e]||null==n[e]&&a&&!0===a[e])&&b.push("allow-"+e.replace(/[A-Z]/g,"-$1").toLowerCase())}),b.length>0&&(i=r())))){s=-1===b.indexOf("allow-same-origin")||-1===b.indexOf("allow-scripts"),e=b.sort().join(" ");try{i.setAttribute("sandbox",e),d=s}catch(n){d=!1}if(i=r())try{d=(u=(i.getAttribute("sandbox")||"").replace(/^\s+|\s+$/g,"").split(/\s+/).sort().join(" "))===e||s&&(""===u||null===l())}catch(n){d=s}}return d},c.prototype.reload=function(){var n,e,t,o=!1,a=this._initialState;if(a.framed&&!1===a.crossOrigin&&(n=r()))try{n.parentNode&&n.parentNode.ownerDocument&&(e=b.call(n.attributes).map(function(n){return{name:n.name,value:n.value}}),t=n.parentNode.ownerDocument.createElement("iframe"),e.forEach(function(n){t.setAttribute(n.name,n.value)}),o=n===n.parentNode.replaceChild(t,n))}catch(n){o=!1}return o},n.sandblaster=new c}(window);