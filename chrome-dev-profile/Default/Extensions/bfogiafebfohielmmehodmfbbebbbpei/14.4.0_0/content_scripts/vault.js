var htmlTag=document.getElementsByTagName("html")[0];htmlTag.setAttribute("browser-extension","");var lastCommandReceived="";const postMessage=(e,t)=>{window.postMessage(e,document.location.origin),t&&t()};function resetInactivityTimeoutListener(e){sendMessage("resetInactivityTimeout",{type:"ACTION"})}function forceCacheReloadIfVersionOnPageIsLower(){if(document&&document.body){var e=document.querySelector('meta[name="version"]').content;sendMessage("vaultVersionCheck",{type:"ACTION",data:{versionNumber:e}},function(e){e&&location.reload()})}else setTimeout(forceCacheReloadIfVersionOnPageIsLower,10)}!function e(){"undefined"==typeof addMessageListener?setTimeout(e,0):addMessageListener(function(e,t,n){switch(e.name){case"setInactivityTimeoutListener":document.addEventListener("keyup",resetInactivityTimeoutListener),document.addEventListener("mousemove",resetInactivityTimeoutListener);break;case"removeInactivityTimeoutListener":document.removeEventListener("keyup",resetInactivityTimeoutListener),document.removeEventListener("mousemove",resetInactivityTimeoutListener);break;case"vaultForceReload":location.reload();break;default:if(safariAPI&&e.data){e=e.data;const t=new Uint8Array(e);t&&(e=t)}postMessage(e,n)}})}(),(isEdge||isFirefox||safariAPI)&&window.addEventListener("message",function(e){var t=e.data;if("ext"!==t.client)if("[object Uint8Array]"===Object.prototype.toString.call(t)){var n=Array.from(t);sendMessage("handleVaultMessage",{type:"ACTION",data:n},function(e){})}else sendMessage("handleVaultMessage",{type:"ACTION",data:t},function(e){})}),forceCacheReloadIfVersionOnPageIsLower(),window.addEventListener("beforeunload",function(e){document.querySelector(".sso-title")&&sendMessage("vaultSSOPage",{type:"SET",data:!0})}),safariAPI&&window.addEventListener("pagehide",function(e){document.querySelector(".sso-title")&&sendMessage("vaultSSOPage",{type:"SET",data:!0})});